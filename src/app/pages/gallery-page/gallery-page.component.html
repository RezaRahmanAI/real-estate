<app-gallery-hero />




<section class="project-gallery py-20 bg-light" id="projectGallery">
  <div class="w-[85%] mx-auto px-4">
    <h2 class="text-3xl md:text-4xl font-poppins font-bold text-dark mb-8 text-center fade-up">
      Project Gallery
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 fade-up">
      <div
        *ngFor="let item of galleryItems; let i = index"
        class="relative overflow-hidden bg-white shadow-lg hover:shadow-xl transition cursor-pointer"
        (click)="openLightbox(i)"
      >
        <img
          *ngIf="item.contentType === 'Image'"
          [src]="baseUrl + '/api/attachment/get/' + item.contentName"
          [alt]="item.title"
          class="w-full h-60 object-cover"
          (error)="onImageError($event)"
        />

        <video
          *ngIf="item.contentType === 'Video'"
          [src]="baseUrl + '/api/attachment/get/' + item.contentName"
          controls
          class="w-full h-60 object-cover"
          (error)="onImageError($event)"
        ></video>
      </div>

      <!-- Empty state -->
      <div *ngIf="!galleryItems.length" class="col-span-full text-center py-8 text-dark font-poppins bg-accent-light/20 rounded-2xl">
        No gallery items available. Please check back later.
      </div>
    </div>
  </div>
</section>

<!-- Lightbox Modal -->
<div *ngIf="lightboxOpen && currentItem" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
  <button class="absolute top-4 right-6 text-white text-3xl" (click)="closeLightbox()">✖</button>

  <!-- Prev button -->
  <button class="absolute left-20 text-white text-4xl" (click)="prevItem()">❮</button>

  <div class="relative w-[85%] max-w-6xl flex items-center justify-center">
    <!-- Display image or video -->
    <ng-container *ngIf="currentItem">
      <img
        *ngIf="currentItem.contentType === 'Image'"
        [src]="baseUrl + '/api/attachment/get/' + currentItem.contentName"
        [alt]="currentItem.title"
        class="max-h-[80vh] object-contain rounded-lg"
        (error)="onImageError($event)"
      />

      <video
        *ngIf="currentItem.contentType === 'Video'"
        [src]="baseUrl + '/api/attachment/get/' + currentItem.contentName"
        controls
        autoplay
        class="max-h-[80vh] object-contain rounded-lg"
        (error)="onImageError($event)"
      ></video>
    </ng-container>
  </div>

  <!-- Next button -->
  <button class="absolute right-20 text-white text-4xl" (click)="nextItem()">❯</button>
</div>